JAVAC=javac
JAVAC_FLAGS=-sourcepath .
JAVA=java
JAVA_FLAGS=
PARSER=${JAVA} ${JAVA_FLAGS} java_cup.Main
PARSER_FLAGS=-nopositions -expect 100
LEXER=jflex
LEXER_FLAGS=
all : test

test : absyn cmm/Yylex.class cmm/PrettyPrinter.class cmm/Test.class cmm/VisitSkel.class cmm/ComposVisitor.class cmm/AbstractVisitor.class cmm/FoldVisitor.class cmm/AllVisitor.class cmm/parser.class cmm/sym.class cmm/Test.class

.PHONY : absyn

%.class : %.java
	${JAVAC} ${JAVAC_FLAGS} $^

absyn : cmm/Absyn/Program.java cmm/Absyn/PDefs.java cmm/Absyn/Def.java cmm/Absyn/DFun.java cmm/Absyn/ListDef.java cmm/Absyn/Arg.java cmm/Absyn/ADecl.java cmm/Absyn/ListArg.java cmm/Absyn/Stm.java cmm/Absyn/SExp.java cmm/Absyn/SDecls.java cmm/Absyn/SInit.java cmm/Absyn/SReturn.java cmm/Absyn/SWhile.java cmm/Absyn/SBlock.java cmm/Absyn/SIfElse.java cmm/Absyn/ListStm.java cmm/Absyn/Exp.java cmm/Absyn/EBool.java cmm/Absyn/EInt.java cmm/Absyn/EDouble.java cmm/Absyn/EId.java cmm/Absyn/EApp.java cmm/Absyn/EPost.java cmm/Absyn/EPre.java cmm/Absyn/EMul.java cmm/Absyn/EAdd.java cmm/Absyn/ECmp.java cmm/Absyn/EAnd.java cmm/Absyn/EOr.java cmm/Absyn/EAss.java cmm/Absyn/ListExp.java cmm/Absyn/IncDecOp.java cmm/Absyn/OInc.java cmm/Absyn/ODec.java cmm/Absyn/MulOp.java cmm/Absyn/OTimes.java cmm/Absyn/ODiv.java cmm/Absyn/AddOp.java cmm/Absyn/OPlus.java cmm/Absyn/OMinus.java cmm/Absyn/CmpOp.java cmm/Absyn/OLt.java cmm/Absyn/OGt.java cmm/Absyn/OLtEq.java cmm/Absyn/OGtEq.java cmm/Absyn/OEq.java cmm/Absyn/ONEq.java cmm/Absyn/BoolLit.java cmm/Absyn/LTrue.java cmm/Absyn/LFalse.java cmm/Absyn/Type.java cmm/Absyn/Type_bool.java cmm/Absyn/Type_int.java cmm/Absyn/Type_double.java cmm/Absyn/Type_void.java cmm/Absyn/ListId.java
	${JAVAC} ${JAVAC_FLAGS} $^

cmm/Yylex.java : cmm/Yylex
	${LEXER} ${LEXER_FLAGS} cmm/Yylex

cmm/parser.java cmm/sym.java : cmm/_cup.cup
	${PARSER} ${PARSER_FLAGS} cmm/_cup.cup
	mv parser.java sym.java cmm/

cmm/Yylex.class : cmm/Yylex.java cmm/parser.java cmm/sym.java

cmm/sym.class : cmm/sym.java

cmm/parser.class : cmm/parser.java cmm/sym.java

cmm/PrettyPrinter.class : cmm/PrettyPrinter.java

clean :
	rm -f cmm/Absyn/*.class cmm/*.class

distclean : vclean

vclean :
	 rm -f cmm/Absyn/Program.java cmm/Absyn/PDefs.java cmm/Absyn/Def.java cmm/Absyn/DFun.java cmm/Absyn/ListDef.java cmm/Absyn/Arg.java cmm/Absyn/ADecl.java cmm/Absyn/ListArg.java cmm/Absyn/Stm.java cmm/Absyn/SExp.java cmm/Absyn/SDecls.java cmm/Absyn/SInit.java cmm/Absyn/SReturn.java cmm/Absyn/SWhile.java cmm/Absyn/SBlock.java cmm/Absyn/SIfElse.java cmm/Absyn/ListStm.java cmm/Absyn/Exp.java cmm/Absyn/EBool.java cmm/Absyn/EInt.java cmm/Absyn/EDouble.java cmm/Absyn/EId.java cmm/Absyn/EApp.java cmm/Absyn/EPost.java cmm/Absyn/EPre.java cmm/Absyn/EMul.java cmm/Absyn/EAdd.java cmm/Absyn/ECmp.java cmm/Absyn/EAnd.java cmm/Absyn/EOr.java cmm/Absyn/EAss.java cmm/Absyn/ListExp.java cmm/Absyn/IncDecOp.java cmm/Absyn/OInc.java cmm/Absyn/ODec.java cmm/Absyn/MulOp.java cmm/Absyn/OTimes.java cmm/Absyn/ODiv.java cmm/Absyn/AddOp.java cmm/Absyn/OPlus.java cmm/Absyn/OMinus.java cmm/Absyn/CmpOp.java cmm/Absyn/OLt.java cmm/Absyn/OGt.java cmm/Absyn/OLtEq.java cmm/Absyn/OGtEq.java cmm/Absyn/OEq.java cmm/Absyn/ONEq.java cmm/Absyn/BoolLit.java cmm/Absyn/LTrue.java cmm/Absyn/LFalse.java cmm/Absyn/Type.java cmm/Absyn/Type_bool.java cmm/Absyn/Type_int.java cmm/Absyn/Type_double.java cmm/Absyn/Type_void.java cmm/Absyn/ListId.java cmm/Absyn/Program.class cmm/Absyn/PDefs.class cmm/Absyn/Def.class cmm/Absyn/DFun.class cmm/Absyn/ListDef.class cmm/Absyn/Arg.class cmm/Absyn/ADecl.class cmm/Absyn/ListArg.class cmm/Absyn/Stm.class cmm/Absyn/SExp.class cmm/Absyn/SDecls.class cmm/Absyn/SInit.class cmm/Absyn/SReturn.class cmm/Absyn/SWhile.class cmm/Absyn/SBlock.class cmm/Absyn/SIfElse.class cmm/Absyn/ListStm.class cmm/Absyn/Exp.class cmm/Absyn/EBool.class cmm/Absyn/EInt.class cmm/Absyn/EDouble.class cmm/Absyn/EId.class cmm/Absyn/EApp.class cmm/Absyn/EPost.class cmm/Absyn/EPre.class cmm/Absyn/EMul.class cmm/Absyn/EAdd.class cmm/Absyn/ECmp.class cmm/Absyn/EAnd.class cmm/Absyn/EOr.class cmm/Absyn/EAss.class cmm/Absyn/ListExp.class cmm/Absyn/IncDecOp.class cmm/Absyn/OInc.class cmm/Absyn/ODec.class cmm/Absyn/MulOp.class cmm/Absyn/OTimes.class cmm/Absyn/ODiv.class cmm/Absyn/AddOp.class cmm/Absyn/OPlus.class cmm/Absyn/OMinus.class cmm/Absyn/CmpOp.class cmm/Absyn/OLt.class cmm/Absyn/OGt.class cmm/Absyn/OLtEq.class cmm/Absyn/OGtEq.class cmm/Absyn/OEq.class cmm/Absyn/ONEq.class cmm/Absyn/BoolLit.class cmm/Absyn/LTrue.class cmm/Absyn/LFalse.class cmm/Absyn/Type.class cmm/Absyn/Type_bool.class cmm/Absyn/Type_int.class cmm/Absyn/Type_double.class cmm/Absyn/Type_void.class cmm/Absyn/ListId.class
	 rm -f cmm/Absyn/*.class
	 rmdir cmm/Absyn/
	 rm -f cmm/Yylex cmm/_cup.cup cmm/Yylex.java cmm/VisitSkel.java cmm/ComposVisitor.java cmm/AbstractVisitor.java cmm/FoldVisitor.java cmm/AllVisitor.java cmm/PrettyPrinter.java cmm/Skeleton.java cmm/Test.java cmm/parser.java cmm/sym.java cmm/*.class
	 rm -f Makefile
	 rmdir -p cmm/
